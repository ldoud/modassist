<?xml version="1.0" encoding="UTF-8"?>
<solver>
    <!--<environmentMode>FAST_ASSERT</environmentMode>-->

    <!-- Domain model configuration -->
    <scanAnnotatedClasses>
        <packageInclude>com.github.ldoud.modassist.planning</packageInclude>
    </scanAnnotatedClasses>

    <scoreDirectorFactory>
        <easyScoreCalculatorClass>com.github.ldoud.modassist.planning.EasySpeedScoreCalculator</easyScoreCalculatorClass>
        <!--<scoreDrl>org/optaplanner/examples/cloudbalancing/solver/cloudBalancingScoreRules.drl</scoreDrl>-->
    </scoreDirectorFactory>

    <!-- Optimization algorithms configuration -->
    <termination>
        <minutesSpentLimit>5</minutesSpentLimit>
    </termination>

    <constructionHeuristic>
        <constructionHeuristicType>STRONGEST_FIT</constructionHeuristicType>
        <changeMoveSelector>
            <valueSelector variableName="transmitter"/>
        </changeMoveSelector>
        <changeMoveSelector>
            <valueSelector variableName="receiver"/>
        </changeMoveSelector>
        <changeMoveSelector>
            <valueSelector variableName="processor"/>
        </changeMoveSelector>
        <changeMoveSelector>
            <valueSelector variableName="holoArray"/>
        </changeMoveSelector>
        <changeMoveSelector>
            <valueSelector variableName="dataBus"/>
        </changeMoveSelector>
        <changeMoveSelector>
            <valueSelector variableName="multiplexer"/>
        </changeMoveSelector>
    </constructionHeuristic>



    <localSearch>
        <!--
        <changeMoveSelector>
            <moveListFactory>
                <moveListFactoryClass>com.github.ldoud.modassist.planning.SpeedSetChangeMoveFactory</moveListFactoryClass>
            </moveListFactory>
        </changeMoveSelector>

-->

        <acceptor>
            <entityTabuSize>7</entityTabuSize>
        </acceptor>

        <forager>
            <acceptedCountLimit>1000</acceptedCountLimit>
            <finalistPodiumType>STRATEGIC_OSCILLATION</finalistPodiumType>
        </forager>

        <!-- -->
        <unionMoveSelector>
            <moveListFactory>
                <cacheType>PHASE</cacheType>
                <moveListFactoryClass>com.github.ldoud.modassist.planning.SpeedSetChangeMoveFactory</moveListFactoryClass>
            </moveListFactory>
        </unionMoveSelector>

        <!--
        <cartesianProductMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="transmitter">
                    <filterClassList>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClassList>
                </valueSelector>
            </changeMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="receiver">
                    <filterClassList>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClassList>
                </valueSelector>
            </changeMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="processor">
                    <filterClassList>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClassList>
                </valueSelector>
            </changeMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="holoArray">
                    <filterClassList>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClassList>
                </valueSelector>
            </changeMoveSelector>

            <cacheType>PHASE</cacheType>
            <selectionOrder>SORTED</selectionOrder>

            <sorterComparatorClass>com.github.ldoud.modassist.planning.ModSetComparator</sorterComparatorClass>

         <filterClass>com.github.ldoud.modassist.planning.SpeedSetMoveChangeFilter</filterClass>

        </cartesianProductMoveSelector>
-->
    </localSearch>

</solver>