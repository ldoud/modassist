<?xml version="1.0" encoding="UTF-8"?>
<solver>
    <!--<environmentMode>FAST_ASSERT</environmentMode>-->

    <!-- Domain model configuration -->
    <scanAnnotatedClasses>
        <packageInclude>com.github.ldoud.modassist.planning</packageInclude>
    </scanAnnotatedClasses>

    <scoreDirectorFactory>
        <easyScoreCalculatorClass>com.github.ldoud.modassist.planning.EasySpeedScoreCalculator</easyScoreCalculatorClass>
        <!--<scoreDrl>org/optaplanner/examples/cloudbalancing/solver/cloudBalancingScoreRules.drl</scoreDrl>-->
    </scoreDirectorFactory>

    <!-- Optimization algorithms configuration -->
    <termination>
        <minutesSpentLimit>2</minutesSpentLimit>
    </termination>

    <constructionHeuristic>
        <constructionHeuristicType>STRONGEST_FIT</constructionHeuristicType>
        <changeMoveSelector>
            <valueSelector variableName="transmitter"/>
        </changeMoveSelector>
        <changeMoveSelector>
            <valueSelector variableName="receiver"/>
        </changeMoveSelector>
        <changeMoveSelector>
            <valueSelector variableName="processor"/>
        </changeMoveSelector>
        <changeMoveSelector>
            <valueSelector variableName="holoArray"/>
        </changeMoveSelector>
        <changeMoveSelector>
            <valueSelector variableName="dataBus"/>
        </changeMoveSelector>
        <changeMoveSelector>
            <valueSelector variableName="multiplexer"/>
        </changeMoveSelector>
    </constructionHeuristic>

    <!--
    <localSearch>
        <cartesianProductMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="transmitter">
                    <cacheType>PHASE</cacheType>
                    <selectionOrder>SORTED</selectionOrder>
                    <sorterManner>DECREASING_STRENGTH</sorterManner>
                    <filterClass>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClass>
                </valueSelector>
            </changeMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="receiver">
                    <filterClass>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClass>
                </valueSelector>
            </changeMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="processor">
                    <filterClass>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClass>
                </valueSelector>
            </changeMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="holoArray">
                    <filterClass>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClass>
                </valueSelector>
            </changeMoveSelector>
            <swapMoveSelector/>
        </cartesianProductMoveSelector>
    </localSearch>
    -->

    <localSearch>
        <cartesianProductMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="transmitter">
                    <filterClassList>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClassList>
                </valueSelector>
            </changeMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="receiver">
                    <filterClass>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClass>
                </valueSelector>
            </changeMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="processor">
                    <filterClass>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClass>
                </valueSelector>
            </changeMoveSelector>
            <changeMoveSelector>
                <valueSelector variableName="holoArray">
                    <filterClass>com.github.ldoud.modassist.planning.SpeedModSelectionFilter</filterClass>
                </valueSelector>
            </changeMoveSelector>
            <!--
            <cacheType>PHASE</cacheType>
            <selectionOrder>SORTED</selectionOrder>
            <sorterManner>DECREASING_STRENGTH</sorterManner>
            -->
            <cacheType>PHASE</cacheType>
            <selectionOrder>SORTED</selectionOrder>
            <sorterComparatorClass>com.github.ldoud.modassist.planning.ModSetComparator</sorterComparatorClass>
            <filterClass>com.github.ldoud.modassist.planning.SpeedSetMoveChangeFilter</filterClass>
            <!--
            <selectedCountLimit>100</selectedCountLimit>
            -->
        </cartesianProductMoveSelector>
    </localSearch>

</solver>